<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Campus Life Planner - Organize your academic tasks, assignments, and events with smart planning tools, regex search, and productivity insights.">
    <meta property="og:title" content="Campus Life Planner">
    <meta property="og:description" content="Smart task management for students. Plan assignments, track deadlines, and boost productivity.">
    <title>Campus Life Planner - Academic Task Manager</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="styles/responsive.css">
</head>
<body>
    <!-- Skip to content link for accessibility -->
    <a href="#main-content" class="skip-link">Skip to content</a>

    <!-- Header -->
    <header role="banner" class="header">
        <div class="header-content">
            <div class="logo">
                <svg class="logo-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
                <span class="logo-text">Campus Planner</span>
            </div>
            <nav role="navigation" aria-label="Main navigation">
                <ul class="nav-menu" id="navMenu">
                    <li><a href="#dashboard" data-page="dashboard" class="nav-link active" data-testid="link-dashboard">Dashboard</a></li>
                    <li><a href="#tasks" data-page="tasks" class="nav-link" data-testid="link-tasks">Tasks</a></li>
                    <li><a href="#about" data-page="about" class="nav-link" data-testid="link-about">About</a></li>
                    <li><a href="#settings" data-page="settings" class="nav-link" data-testid="link-settings">Settings</a></li>
                </ul>
            </nav>
            <button id="themeToggle" class="theme-toggle" aria-label="Toggle dark mode" data-testid="button-theme-toggle">
                <svg class="theme-icon sun-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="5"></circle>
                    <line x1="12" y1="1" x2="12" y2="3"></line>
                    <line x1="12" y1="21" x2="12" y2="23"></line>
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                    <line x1="1" y1="12" x2="3" y2="12"></line>
                    <line x1="21" y1="12" x2="23" y2="12"></line>
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                </svg>
                <svg class="theme-icon moon-icon hidden" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                </svg>
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <main id="main-content" role="main" class="main-content">
        <!-- Dashboard Page -->
        <section id="dashboard" class="page active">
            <div class="page-header">
                <div>
                    <h1>Dashboard</h1>
                    <p class="text-muted">Welcome back! Here's your academic overview.</p>
                </div>
                <button id="addTaskBtn" class="btn btn-primary" data-testid="button-add-task">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                    Add Task
                </button>
            </div>

            <!-- Stats Cards -->
            <div class="stats-grid" id="statsGrid">
                <!-- Stats will be inserted here by JavaScript -->
            </div>

            <div class="dashboard-grid">
                <!-- Recent Tasks -->
                <div class="recent-tasks">
                    <h2>Recent Tasks</h2>
                    <div id="recentTasksList" class="tasks-list">
                        <!-- Recent tasks will be inserted here -->
                    </div>
                </div>

                <!-- Analytics -->
                <aside class="analytics">
                    <div class="chart-container">
                        <h3 class="chart-title">Last 7 Days Activity</h3>
                        <div id="activityChart" class="bar-chart">
                            <!-- Chart will be inserted here -->
                        </div>
                    </div>

                    <div class="cap-status" role="status" aria-live="polite">
                        <p class="cap-title">Duration Cap Status</p>
                        <p id="capText" class="cap-text">0 minutes used of 500 minute weekly target</p>
                        <div class="progress-bar">
                            <div id="capProgress" class="progress-fill"></div>
                        </div>
                        <p id="capWarning" class="cap-warning" aria-live="assertive"></p>
                    </div>
                </aside>
            </div>
        </section>

        <!-- Tasks Page -->
        <section id="tasks" class="page">
            <div class="page-header">
                <div>
                    <h1>Tasks</h1>
                    <p class="text-muted">Manage your assignments and deadlines</p>
                </div>
                <button id="addTaskBtn2" class="btn btn-primary" data-testid="button-add-task-page">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                    Add Task
                </button>
            </div>

            <!-- Search Bar -->
            <div class="search-section">
                <div class="search-bar">
                    <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.35-4.35"></path>
                    </svg>
                    <input type="search" id="searchInput" placeholder="Search tasks..." class="search-input" data-testid="input-search">
                    <svg id="regexIndicator" class="regex-indicator hidden" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="22" y1="2" x2="2" y2="22"></line>
                    </svg>
                </div>
                <div class="search-options">
                    <label class="checkbox-label">
                        <input type="checkbox" id="regexToggle" data-testid="switch-regex">
                        <span>Regex mode</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="caseToggle" checked data-testid="switch-case">
                        <span>Case insensitive</span>
                    </label>
                </div>
                <p id="searchError" class="error-message" role="status" data-testid="search-error"></p>
            </div>

            <!-- Sort Controls -->
            <div class="sort-controls">
                <button class="btn btn-outline btn-sm" id="sortDate" data-testid="button-sort-date">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="m7 15 5 5 5-5"></path>
                        <path d="m7 9 5-5 5 5"></path>
                    </svg>
                    Date
                </button>
                <button class="btn btn-outline btn-sm" id="sortTitle" data-testid="button-sort-title">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="m7 15 5 5 5-5"></path>
                        <path d="m7 9 5-5 5 5"></path>
                    </svg>
                    Title
                </button>
                <button class="btn btn-outline btn-sm" id="sortDuration" data-testid="button-sort-duration">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="m7 15 5 5 5-5"></path>
                        <path d="m7 9 5-5 5 5"></path>
                    </svg>
                    Duration
                </button>
            </div>

            <!-- Tasks Grid -->
            <div id="tasksList" class="tasks-grid">
                <!-- Tasks will be inserted here -->
            </div>

            <div id="emptyState" class="empty-state hidden">
                <p class="text-muted">No tasks match your search</p>
            </div>
        </section>

        <!-- About Page -->
        <section id="about" class="page">
            <div class="about-content">
                <h1>About Campus Life Planner</h1>
                <p class="text-muted">A modern, accessible task management application built for students</p>

                <div class="card">
                    <h2>Purpose</h2>
                    <p>Campus Life Planner is a comprehensive academic task management system designed to help students organize their coursework, track deadlines, and improve productivity. Built with accessibility in mind, it features semantic HTML, ARIA live regions, keyboard navigation, and responsive design.</p>
                    <p>The application demonstrates advanced web development concepts including regex validation, pattern-based search, localStorage persistence, and data visualization—all implemented with vanilla JavaScript and modern CSS.</p>
                </div>

                <h2>Key Features</h2>
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">📅</div>
                        <h3>Task Management</h3>
                        <p>Organize assignments, projects, and study sessions with ease</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">🔍</div>
                        <h3>Regex Search</h3>
                        <p>Powerful pattern-based search with case-insensitive options</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">📊</div>
                        <h3>Statistics Dashboard</h3>
                        <p>Track your productivity with detailed analytics and trends</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">📁</div>
                        <h3>Import/Export</h3>
                        <p>Backup and restore your data with JSON import/export</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">✅</div>
                        <h3>Form Validation</h3>
                        <p>Advanced regex validation ensures data quality</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">⚙️</div>
                        <h3>Customizable</h3>
                        <p>Configure duration targets and preferences to your needs</p>
                    </div>
                </div>

                <div class="card">
                    <h2>Contact</h2>
                    <p>Questions or feedback? Reach out through the following channels:</p>
                    <div class="contact-links">
                        <a href="https://github.com" target="_blank" rel="noopener noreferrer" class="btn btn-outline" data-testid="link-github">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                            </svg>
                            GitHub
                        </a>
                        <a href="mailto:contact@campusplanner.dev" class="btn btn-outline" data-testid="link-email">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                                <polyline points="22,6 12,13 2,6"></polyline>
                            </svg>
                            Email
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Settings Page -->
        <section id="settings" class="page">
            <h1>Settings</h1>
            <p class="text-muted">Configure your preferences and manage your data</p>

            <div class="card">
                <h2>Duration Preferences</h2>
                <p class="text-muted">Set your weekly time target for academic tasks</p>
                <div class="form-group">
                    <label for="weeklyTarget">Weekly Target (minutes)</label>
                    <input type="number" id="weeklyTarget" value="500" data-testid="input-weekly-target">
                    <p class="text-muted">You'll receive notifications when approaching or exceeding this target</p>
                </div>
                <button id="saveTarget" class="btn btn-primary" data-testid="button-save-target">Save Target</button>
            </div>

            <div class="card">
                <h2>Data Management</h2>
                <p class="text-muted">Import, export, or delete your task data</p>
                <div class="button-group">
                    <button id="exportBtn" class="btn btn-outline" data-testid="button-export">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="7 10 12 15 17 10"></polyline>
                            <line x1="12" y1="15" x2="12" y2="3"></line>
                        </svg>
                        Export Data
                    </button>
                    <button id="importBtn" class="btn btn-outline" data-testid="button-import">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="17 8 12 3 7 8"></polyline>
                            <line x1="12" y1="3" x2="12" y2="15"></line>
                        </svg>
                        Import Data
                    </button>
                    <input type="file" id="importFile" accept="application/json" class="hidden">
                    <button id="clearBtn" class="btn btn-danger" data-testid="button-clear-data">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="3 6 5 6 21 6"></polyline>
                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                        </svg>
                        Clear All Data
                    </button>
                </div>
            </div>
        </section>
    </main>

    <!-- Task Form Modal -->
    <div id="taskModal" class="modal" role="dialog" aria-labelledby="modalTitle" aria-modal="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Add New Task</h2>
                <button class="modal-close" aria-label="Close modal" data-testid="button-close-modal">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            <form id="taskForm" class="task-form">
                <div class="form-group">
                    <label for="taskTitle">Title *</label>
                    <input type="text" id="taskTitle" required data-testid="input-title">
                    <span class="error-message" id="titleError"></span>
                </div>

                <div class="form-group">
                    <label for="taskDueDate">Due Date (YYYY-MM-DD) *</label>
                    <input type="text" id="taskDueDate" placeholder="2025-10-20" required data-testid="input-due-date">
                    <span class="error-message" id="dueDateError"></span>
                </div>

                <div class="form-group">
                    <label for="taskDuration">Duration (minutes) *</label>
                    <input type="number" id="taskDuration" placeholder="60" required data-testid="input-duration">
                    <span class="error-message" id="durationError"></span>
                </div>

                <div class="form-group">
                    <label for="taskTag">Tag *</label>
                    <select id="taskTag" required data-testid="select-tag">
                        <option value="Assignment">Assignment</option>
                        <option value="Study">Study</option>
                        <option value="Project">Project</option>
                        <option value="Exam">Exam</option>
                        <option value="Reading">Reading</option>
                        <option value="Other">Other</option>
                    </select>
                    <span class="error-message" id="tagError"></span>
                </div>

                <div class="form-group">
                    <label for="taskStatus">Status *</label>
                    <select id="taskStatus" required>
                        <option value="onTrack">On Track</option>
                        <option value="dueSoon">Due Soon</option>
                        <option value="urgent">Urgent</option>
                        <option value="completed">Completed</option>
                    </select>
                </div>

                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary" data-testid="button-submit">Add Task</button>
                    <button type="button" class="btn btn-outline" id="cancelBtn" data-testid="button-cancel">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteModal" class="modal" role="alertdialog" aria-labelledby="deleteTitle" aria-modal="true">
        <div class="modal-content modal-small">
            <h2 id="deleteTitle">Delete Task</h2>
            <p>Are you sure you want to delete this task? This action cannot be undone.</p>
            <div class="modal-footer">
                <button id="confirmDelete" class="btn btn-danger" data-testid="button-confirm-delete">Delete</button>
                <button id="cancelDelete" class="btn btn-outline" data-testid="button-cancel-delete">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script type="module" src="scripts/main.js"></script>
</body>
</html>
